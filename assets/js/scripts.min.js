var data={action:"recommender_ingest",nonce:recom.nonce,item:recom.item,type:[]},recom_obj_to_qs=function(e,t){return Object.keys(e).reduce(function(o,n){var s=e[n],n=t?t+"["+n+"]":n,a=typeof s==typeof{}?recom_obj_to_qs(s,n):encodeURIComponent(n)+"="+encodeURIComponent(s);return o.push(a),o},[]).join("&")},recom_ajax=function(e,t){e.method="undefined"!=typeof e.method?e.method:"GET",e.async="undefined"!=typeof e.async?e.async:!1;var o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(o.onreadystatechange=function(){return 4==o.readyState&&o.status>=200&&o.status<300?t?void t(o.responseText):{data:o.responseText,status:o.status,error:!1}:{data:o.responseText||"",status:o.status,error:!0}},~["POST","PUT"].indexOf(e.method)?(o.open(e.method,e.url,e.async),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),"json"==e.dataType&&(e.data=recom_obj_to_qs(e.data)),o.send(e.data)):("undefined"!=typeof e.data&&null!==e.data&&(e.url=e.url+"?"+e.data),o.open(e.method,e.url,e.async),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(null)),!e.async){if(!(o.status>=200&&o.status<300))return{data:o.responseText||"",status:o.status,error:!0};if(!t)return{data:o.responseText,status:o.status,error:!1};t(o.responseText)}};window.onload=function(){if(recom.item.length){var e=window.location.hash.split("#.rec.").pop(),t=!1,o=!1,n=!1,s=!1;if(recom.item.length&&data.type.push("view"),recom.scroll.length&&(window.onscroll=function(e){t||(data.type.push("scroll"),t=!0)}),recom.read.length&&(seconds=1e3*Math.round(readingTime("body")/5),setTimeout(function(){data.type.push("read")},seconds)),recom.like.length)for(like_elems=document.querySelectorAll(recom.like_selector),i=0;i<like_elems.length;i++)like_elems[i].onclick=function(){o||(data.type.push("like"),o=!0)};if(recom.share.length)for(share_elems=document.querySelectorAll(recom.share_selector),i=0;i<share_elems.length;i++)share_elems[i].onclick=function(){n||(data.type.push("share"),n=!0)};recom.copy.length&&(document.oncopy=function(){s||(data.type.push("copy"),s=!0)}),recom.hash.length&&e.length&&(data.type.push("hash"),data.user=e)}},window.onbeforeunload=function(e){request={url:recom.ajaxurl,method:"POST",async:!1,data:data,dataType:"json"},recom_ajax(request)};